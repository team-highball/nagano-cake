<div class="container">

  <div class="row">
    <h3>注文履歴詳細</h3>
  </div>

  <div class="row">

    <div class="col-lg-7">
      <div class="row">
        <h3>注文情報</h3>
      </div>
      <div class="row">
        <div class="container">
          <div class="row">
            <div class="col-lg-3">
              <strong>注文日</strong>
            </div>
            <div class="col-lg-9">
              <!-- ApplicationControllerでsimple_imeというメソッドを作ることとする -->
              <!-- /app/helpers/application_helper.rb
                    def simple_time(time)
                    time.strftime("%Y-%m-%d　%H:%M　")
                    end  -->
              <%= simple_time(@order.created_at) %>
            </div>
          </div>
          <div class="row">
            <div class="col-lg-3">
              <strong>配送先</strong>
            </div>
            <div class="col-lg-9">
            <%= @order.address %>
            </div>
          </div>
          <div class="col-lg-3">
            <strong>支払方法</strong>
          </div>
          <div class="col-lg-9">
            <%= @order.payment_method %>
          </div>
        </div>
        <div class="row">
          <div class="col-lg-3">
            <strong>状況</strong>
          </div>
          <div class="col-lg-9">
            <% if @order.status == 1 %>
              <p>入金待ち</p>
            <% elsif @order.status == 2 %>
              <p>入金確認</p>
            <% elsif @order.status == 3 %>
              <p>制作中</p>
            <% elsif @order.status == 4 %>
              <p>発送準備中</p>
            <% else %>
              <p>発送済</p>
            <% end %>
          </div>
        </div>
      </div>
    </div>

    <div class="row">
      <h3>注文内容</h3>
    </div>
    <div class="d-none d-lg-block">
      <div class="row">
        <div class="col-lg-4">
          <strong>商品</strong>
        </div>
        <div class="col-lg-3">
          <strong>単価(税込)</strong>
        </div>
        <div class="col-lg-2">
          <strong>個数</strong>
        </div>
        <div class="col-lg-2">
          <strong>小計</strong>
        </div>
      </div>
    </div>
    <% sum_all = 0 %>
    <% @order.order_products.each do |op| %>
    <div class="row">
      <div class="col-lg-4">
        <%= op.product.name %>
      </div>
      <div class="col-lg-3">
        <%= price_include_tax(op.price) %>
      </div>
      <div class="col-lg-2">
        <%= op.count %>個
      </div>
      <div class="col-lg-2">
        <%= sub_total = price_include_tax(op.price).to_i * op.count %>円
        <% sum_all += sub_total %>
      </div>
    </div>
    <% end %>
  </div>

  <div class="col-lg-5">
    <div class="row">
      <h3>請求情報</h3>
    </div>
    <div class="row">
      <div class="container">
        <div class="row">
          <div class="col-lg-6">
            <strong>商品合計</strong>
          </div>
          <div class="col-lg-6">
            <%= sum_all %>円
          </div>
        </div>
        <div class="row">
          <div class="col-lg-6">
            <strong>配送料</strong>
          </div>
          <div class="col-lg-6">
            <%= @order.postage %>円
          </div>
        </div>
        <div class="row">
          <div class="col-lg-6">
            <strong>御請求額</strong>
          </div>
          <div class="col-lg-6">
            <%= sum_all + @order.postage.to_i %>円
          </div>
        </div>
      </div>
    </div>
  </div>

</div>
